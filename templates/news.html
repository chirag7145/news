{% extends 'base.html' %}

{% block content %}

<div class="container m-5">
    <form method="get" class="form-inline py-4">
        <input class="form-control mr-2" type="text" name="country" placeholder="Country-Code">
        <input class="form-control mr-2" type="text" name="category" placeholder="Category">
        <button type="submit" class="btn btn-dark">Search</button>
    </form>
</div>

{% if articles %}
{% for news in articles %}
{% if news.urlToImage and news.source.name and news.description and news.url and news.title %}
<div class="container">
    <div class="row justify-content-between mb-4">
        <div class="col-md-8 offset-md-2">
            <div class="card max-width: 540px;">
                <img class="card-img-top img-fluid rounded mx-auto d-block" src="{{news.urlToImage}}" alt="">
                <div class="card-body">
                    <h4 class="card-title text-muted text-center"><a target="blank" href="{{news.url}}"
                            class="text-muted">{{news.title}}</a></h4>
                    <p class="card-text lead">{{news.description}}</p>
                    <blockquote class="blockquote mb-0">
                        <footer class="blockquote-footer">
                            <small class="text-muted">
                                Author <cite title="Source">{{news.author}}</cite>
                                {% if user.is_authenticated %}
                                <form action="{% url 'home' %}" method="get">
                                    <input style="display: none;" type="text" name="country" placeholder="Country-Code"
                                        value="{{country}}">
                                    <input style="display: none;" type="text" name="category" placeholder="Category"
                                        value="{{category}}">
                                    <input style="display: none;" type="text" name="article" placeholder="Article"
                                        value="{{forloop.counter0}}">
                                    <button class="btn" type="submit"><i class="fas fa-bookmark"></i></button>
                                </form>
                                {% endif %}
                            </small>
                        </footer>
                    </blockquote>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endfor %}
{% endif %}

{% endblock content %}

{% block script %}
{{block.super}}
<script>
    $(document).ready(function () {
        // executes when HTML-Document is loaded and DOM is ready
        // console.log("document is ready");

        // To show the shadow effect
        $(".card").hover(
            function () {
                $(this).addClass('shadow-lg').css('cursor', 'pointer');
            }, function () {
                $(this).removeClass('shadow-lg');
            }
        );


    });
</script>
{% endblock script %}